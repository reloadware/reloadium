<idea-plugin>
    <id>org.reloadium</id>
    <name>Reloadium - Hot Reloading &#38; Profiling for Python</name>
    <version>0.8.6</version>
    <idea-version since-build="203"/>
    <vendor email="damian@reloadware.com" url="reloadium.io">Reloadware</vendor>
    <depends>com.intellij.modules.lang</depends>
    <depends>com.intellij.modules.python</depends>
    <depends>com.intellij.modules.platform</depends>

    <description><![CDATA[
        <div>
            <img src="https://raw.githubusercontent.com/reloadware/reloadium/main/media/example_small.gif" width="600px" alt="Hot Reloading"/>
        </div>
        <div>
            <img src="https://raw.githubusercontent.com/reloadware/reloadium/main/media/profiling.gif" width="600px" alt="Profiling"/>
        </div>
        
         <p>Reloadium adds hot reloading and profiling features to any Python application</p>
        ]]>
    </description>

    <change-notes><![CDATA[
    
        <h3>0.8.6</h3>
            <div style="padding-left: 20px;">
            
                <h4>Miscellaneous:</h4>
                <div style="padding-left: 40px;">
                    
                        <b>Fixed:</b>
                        <ul>
                            <li>Encoding issues</li>
                            <li>Import threading issues</li>
                            <li>Multiprocessing issues</li>
                            <li>Double popup issue on FrameError</li>
                        </ul>
                    
                        <b>Added:</b>
                        <ul>
                            <li>Multiprocessing extension</li>
                            <li>Manual reload file command</li>
                            <li>Symlinks and mounted directories support</li>
                        </ul>
                    
                </div>
                <h4>PyCharm:</h4>
                <div style="padding-left: 40px;">
                    
                        <b>Added:</b>
                        <ul>
                            <li>Reloadable files highlighting</li>
                            <li>Manual reload action</li>
                        </ul>
                    
                        <b>Fixed:</b>
                        <ul>
                            <li>Too many open files issue</li>
                        </ul>
                    
                </div>
            </div>
        </div>
        <h3>0.8.5</h3>
            <div style="padding-left: 20px;">
            
                <h4>Miscellaneous:</h4>
                <div style="padding-left: 40px;">
                    
                        <b>Added:</b>
                        <ul>
                            <li>Support for no_reload decorator for frame reloads</li>
                            <li>Profiling optimisations</li>
                            <li>PyTest extension</li>
                            <li>Disabling telemetry</li>
                            <li>Disabling error reporting</li>
                            <li>RELOADIUMIGNORE env variable</li>
                            <li>M1 support</li>
                            <li>Profiling optimisations</li>
                        </ul>
                    
                        <b>Fixed:</b>
                        <ul>
                            <li>cached_property issues</li>
                            <li>Moving function closures</li>
                            <li>Moving non instantiated closures</li>
                        </ul>
                    
                        <b>Removed:</b>
                        <ul>
                            <li>Win32 support</li>
                        </ul>
                    
                </div>
                <h4>PyCharm:</h4>
                <div style="padding-left: 40px;">
                    
                        <b>Fixed:</b>
                        <ul>
                            <li>Freeze on update</li>
                        </ul>
                    
                        <b>Added:</b>
                        <ul>
                            <li>Docker compose support</li>
                            <li>Docker support</li>
                        </ul>
                    
                </div>
            </div>
        </div>
        <h3>0.8.4</h3>
            <div style="padding-left: 20px;">
            
                <h4>Miscellaneous:</h4>
                <div style="padding-left: 40px;">
                    
                        <b>Changed:</b>
                        <ul>
                            <li>Add mypyc optimisations</li>
                        </ul>
                    
                        <b>Added:</b>
                        <ul>
                            <li>Support async methods</li>
                            <li>Nested closures support</li>
                        </ul>
                    
                        <b>Removed:</b>
                        <ul>
                            <li>Python 3.6 support</li>
                        </ul>
                    
                </div>
            </div>
        </div>
        <h3>0.8.3</h3>
            <div style="padding-left: 20px;">
            
                <h4>Miscellaneous:</h4>
                <div style="padding-left: 40px;">
                    
                        <b>Changed:</b>
                        <ul>
                            <li>More defensive reloading</li>
                        </ul>
                    
                        <b>Added:</b>
                        <ul>
                            <li>Reloading closures</li>
                            <li>Before and after reload hooks</li>
                            <li>Accepting (re-raising) handled exceptions</li>
                            <li>Profiling modules</li>
                        </ul>
                    
                        <b>Fixed:</b>
                        <ul>
                            <li>Not resolving templates for Flask</li>
                            <li>Errors not highlighted when reloading module frames</li>
                            <li>Syntax errors not highlighted</li>
                            <li>Pickling issues</li>
                            <li>Watching paths with dots</li>
                        </ul>
                    
                </div>
                <h4>PyCharm:</h4>
                <div style="padding-left: 40px;">
                    
                        <b>Added:</b>
                        <ul>
                            <li>Rendering exception messages</li>
                        </ul>
                    
                </div>
            </div>
        </div>
        <h3>0.8.2</h3>
            <div style="padding-left: 20px;">
            
                <h4>Miscellaneous:</h4>
                <div style="padding-left: 40px;">
                    
                        <b>Fixed:</b>
                        <ul>
                            <li>Frame progress stopping after handled exceptions</li>
                            <li>Startup error when running without utf-8 encoding</li>
                            <li>Fixing errors mode for handled exceptions</li>
                            <li>Mocked functions errors</li>
                            <li>Intercepting flask errors</li>
                            <li>Reference issues for enums</li>
                            <li>Dataclass attributes updating issues</li>
                            <li>Debugger speedups</li>
                        </ul>
                    
                        <b>Added:</b>
                        <ul>
                            <li>Handle profiling closures</li>
                            <li>VsCode compatibility</li>
                        </ul>
                    
                </div>
                <h4>PyCharm:</h4>
                <div style="padding-left: 40px;">
                    
                        <b>Added:</b>
                        <ul>
                            <li>More colormaps choices</li>
                        </ul>
                    
                        <b>Changed:</b>
                        <ul>
                            <li>Move Timing Details button below Annotate with git blame</li>
                            <li>Make debugger speedups enabled by default</li>
                        </ul>
                    
                        <b>Fixed:</b>
                        <ul>
                            <li>Disappearing frame progress for very slow lines</li>
                        </ul>
                    
                </div>
            </div>
        </div>
        <h3>0.8.1</h3>
            <div style="padding-left: 20px;">
            
                <h4>Miscellaneous:</h4>
                <div style="padding-left: 40px;">
                    
                        <b>Fixed:</b>
                        <ul>
                            <li>Pydash icompatibility</li>
                            <li>--help not working</li>
                            <li>Morphing object types</li>
                            <li>Hanging on reload issues</li>
                        </ul>
                    
                        <b>Added:</b>
                        <ul>
                            <li>Handle django model fields</li>
                            <li>Graphene extension</li>
                        </ul>
                    
                </div>
                <h4>PyCharmPlugin:</h4>
                <div style="padding-left: 40px;">
                    
                        <b>Fixed:</b>
                        <ul>
                            <li>Error highlighter not working for closures</li>
                            <li>Multithreaded frame reload issues</li>
                        </ul>
                    
                        <b>Added:</b>
                        <ul>
                            <li>Highlighting updated objects</li>
                            <li>Preferences</li>
                            <li>Frame progress rendering</li>
                            <li>Profiling current function</li>
                        </ul>
                    
                </div>
            </div>
        </div>
        <h3>0.8.0</h3>
            <div style="padding-left: 20px;">
            
                <h4>Miscellaneous:</h4>
                <div style="padding-left: 40px;">
                    
                        <b>Fixed:</b>
                        <ul>
                            <li>Reloading decorated methods by objects</li>
                            <li>Adding methods bugs</li>
                            <li>Fixing module errors while in function frame bugs</li>
                            <li>Hangs on startup error in debug mode</li>
                            <li>Python <= 3.8 compatiblity issues</li>
                            <li>Python 3.10 compatibility issues</li>
                            <li>Frame restart pointer recovering bugs</li>
                        </ul>
                    
                        <b>Added:</b>
                        <ul>
                            <li>Handle reloading main module without guard, while loop as entrypoint</li>
                        </ul>
                    
                        <b>Changed:</b>
                        <ul>
                            <li>Optimise threads</li>
                        </ul>
                    
                </div>
                <h4>PyCharmPlugin:</h4>
                <div style="padding-left: 40px;">
                    
                        <b>Added:</b>
                        <ul>
                            <li>First run dialog</li>
                            <li>First debug dialog</li>
                            <li>Events, commands</li>
                            <li>Error highlighter</li>
                            <li>First user error dialog</li>
                            <li>Fixing frame error dialog</li>
                            <li>Remote interpreters improvements</li>
                            <li>Handling remote path mappings</li>
                        </ul>
                    
                </div>
            </div>
        </div>
        <h3>0.7.8</h3>
            <div style="padding-left: 20px;">
            
                <h4>Miscellaneous:</h4>
                <div style="padding-left: 40px;">
                    
                        <b>Fixed:</b>
                        <ul>
                            <li>Index not ready errors</li>
                            <li>Optimise import time</li>
                            <li>Modifying decorated class methods bugs</li>
                            <li>Comprehensions bugs</li>
                            <li>Python 3.10 compatibility bugs</li>
                            <li>Reloading nested classes</li>
                            <li>Windows compatibility bugs (django not rolling back db on user error)</li>
                        </ul>
                    
                        <b>Changed:</b>
                        <ul>
                            <li>Make debugger speedups disabled by default (does not work in some cases)</li>
                        </ul>
                    
                        <b>Added:</b>
                        <ul>
                            <li>Handle user errors feature (let users fix errors that occured durring debugging).</li>
                            <li>Adding and editing enums</li>
                        </ul>
                    
                </div>
            </div>
        </div>
        <h3>0.7.7</h3>
            <div style="padding-left: 20px;">
            
                <h4>Miscellaneous:</h4>
                <div style="padding-left: 40px;">
                    
                        <b>Added:</b>
                        <ul>
                            <li>About Reloadium button</li>
                        </ul>
                    
                        <b>Fixed:</b>
                        <ul>
                            <li>Older IDE versions compatiblity</li>
                            <li>Patching methods bugs</li>
                            <li>Adding classes bugs</li>
                            <li>Patching tuples bugs</li>
                        </ul>
                    
                </div>
                <h4>User Experience:</h4>
                <div style="padding-left: 40px;">
                    
                        <b>Added:</b>
                        <ul>
                            <li>Modifing not loaded files msg</li>
                        </ul>
                    
                </div>
            </div>
        </div>
        <h3>0.7.6</h3>
            <div style="padding-left: 20px;">
            
                <h4>Miscellaneous:</h4>
                <div style="padding-left: 40px;">
                    
                        <b>Fixed:</b>
                        <ul>
                            <li>Updating methods issues under run (non debug)</li>
                        </ul>
                    
                </div>
            </div>
        </div>
        <h3>0.7.5</h3>
            <div style="padding-left: 20px;">
            
                <h4>Miscellaneous:</h4>
                <div style="padding-left: 40px;">
                    
                        <b>Added:</b>
                        <ul>
                            <li>RELOADIUMPATH working for files</li>
                            <li>Settings</li>
                            <li>Reloadium menu group</li>
                        </ul>
                    
                        <b>Fixed:</b>
                        <ul>
                            <li>Reloading current function with decorators bug</li>
                            <li>Remote interpreters issues</li>
                            <li>Breakpoint not hit when no files are watching</li>
                        </ul>
                    
                </div>
                <h4>User Experience:</h4>
                <div style="padding-left: 40px;">
                    
                        <b>Added:</b>
                        <ul>
                            <li>Warning when editing current function during runtime (not debug)</li>
                            <li>Message that user reload errors can be fixed</li>
                        </ul>
                    
                </div>
                <h4>Django:</h4>
                <div style="padding-left: 40px;">
                    
                        <b>Fixed:</b>
                        <ul>
                            <li>Fixing errors during current function not rolling back session properly</li>
                        </ul>
                    
                </div>
                <h4>Flask:</h4>
                <div style="padding-left: 40px;">
                    
                        <b>Fixed:</b>
                        <ul>
                            <li>Editing template files not reloading page for Flask</li>
                        </ul>
                    
                </div>
            </div>
        </div>
        <h3>0.7.3</h3>
            <div style="padding-left: 20px;">
            
                <h4>Miscellaneous:</h4>
                <div style="padding-left: 40px;">
                    
                        <b>Added:</b>
                        <ul>
                            <li>Print warning when no files are watched</li>
                            <li>Print watched paths on start</li>
                        </ul>
                    
                        <b>Fixed:</b>
                        <ul>
                            <li>Tuples reloading when not changed bug</li>
                        </ul>
                    
                </div>
            </div>
        </div>
        <h3>0.7.2</h3>
            <div style="padding-left: 20px;">
            
                <h4>Miscellaneous:</h4>
                <div style="padding-left: 40px;">
                    
                        <b>Added:</b>
                        <ul>
                            <li>Older mac os systems compatibility</li>
                            <li>Bundle library into the plugin</li>
                            <li>PyGame plugin</li>
                            <li>No reload decorators</li>
                            <li>No reload decorators validation</li>
                        </ul>
                    
                        <b>Changed:</b>
                        <ul>
                            <li>Bump library version</li>
                            <li>Move cache to dot directory</li>
                        </ul>
                    
                        <b>Fixed:</b>
                        <ul>
                            <li>Context popup actions EDT errors</li>
                            <li>Flask request object update issues</li>
                            <li>Python 3.6 compatibility issues</li>
                        </ul>
                    
                </div>
            </div>
        </div>
        <h3>0.7.1</h3>
            <div style="padding-left: 20px;">
            
                <h4>Miscellaneous:</h4>
                <div style="padding-left: 40px;">
                    
                        <b>Fixed:</b>
                        <ul>
                            <li>Older IDE version compatibility</li>
                            <li>Persisting old package versions</li>
                        </ul>
                    
                        <b>Added:</b>
                        <ul>
                            <li>Windows 32bit support</li>
                            <li>Handling not supported python versions</li>
                        </ul>
                    
                </div>
                <h4>Code Quality:</h4>
                <div style="padding-left: 40px;">
                    
                        <b>Added:</b>
                        <ul>
                            <li>More tests</li>
                        </ul>
                    
                        <b>Changed:</b>
                        <ul>
                            <li>Wheels handling refactor</li>
                        </ul>
                    
                </div>
            </div>
        </div>
        <h3>0.7.0</h3>
            <div style="padding-left: 20px;">
            
                <h4>Miscellaneous:</h4>
                <div style="padding-left: 40px;">
                    
                        <b>Added:</b>
                        <ul>
                            <li>Conda compatibility</li>
                            <li>PipEnv compatibility</li>
                            <li>Poetry compatibility</li>
                            <li>Old pip version compatibility</li>
                        </ul>
                    
                        <b>Fixed:</b>
                        <ul>
                            <li>EDT errors for context actions</li>
                        </ul>
                    
                </div>
                <h4>Code quality:</h4>
                <div style="padding-left: 40px;">
                    
                        <b>Added:</b>
                        <ul>
                            <li>Unit tests, integration tests</li>
                            <li>General refactor</li>
                        </ul>
                    
                </div>
            </div>
        </div>
        <h3>0.6.5</h3>
            <div style="padding-left: 20px;">
            
                <h4>Miscellaneous:</h4>
                <div style="padding-left: 40px;">
                    
                        <b>Fixed:</b>
                        <ul>
                            <li>Null pointer exception when sdk is not set</li>
                            <li>Error when setting run from context menu but not exists in configuration list</li>
                        </ul>
                    
                        <b>Removed:</b>
                        <ul>
                            <li>Shortcuts mapping</li>
                        </ul>
                    
                </div>
            </div>
        </div>
        <h3>0.6.4</h3>
            <div style="padding-left: 20px;">
            
                <h4>Miscellaneous:</h4>
                <div style="padding-left: 40px;">
                    
                        <b>Fixed:</b>
                        <ul>
                            <li>Update popup</li>
                            <li>Context group action running wrong configuration</li>
                            <li>NotNull parameter exception when there are no packages</li>
                        </ul>
                    
                </div>
            </div>
        </div>
        <h3>0.6.3</h3>
            <div style="padding-left: 20px;">
            
                <h4>Miscellaneous:</h4>
                <div style="padding-left: 40px;">
                    
                        <b>Fixed:</b>
                        <ul>
                            <li>Pip compatibility issues for linux</li>
                            <li>EDT errors</li>
                            <li>Reloadium buttons not starting process occasionally</li>
                            <li>General stability</li>
                        </ul>
                    
                        <b>Added:</b>
                        <ul>
                            <li>Remote interpreters support</li>
                            <li>Speed optimizations</li>
                            <li>Older versions compatibility</li>
                        </ul>
                    
                </div>
            </div>
        </div>
    ]]>
    </change-notes>

    <extensions defaultExtensionNs="com.intellij">
        <errorHandler implementation="rw.audit.ErrorSubmitter"/>

        <projectConfigurable
          parentId="tools"
          instance="rw.settings.ProjectSettingsConfigurable"
          id="rw.settings.ProjectSettings"
          displayName="Reloadium Project Settings"
          nonDefaultProject="false"/>

        <projectService
          serviceImplementation="rw.settings.ProjectSettings"/>

        <applicationConfigurable
          parentId="tools"
          instance="rw.preferences.PreferencesConfigurable"
          id="rw.preferences.Preferences"
          displayName="Reloadium Preferences"/>

         <applicationService
          serviceImplementation="rw.preferences.Preferences"/>

         <applicationService
          serviceImplementation="rw.dialogs.DialogsState"
          />

        <applicationService
          serviceInterface="rw.service.Service"
          serviceImplementation="rw.service.Service"
          testServiceImplementation="rw.service.TestService"
          />

        <fileDocumentManagerListener implementation="rw.action.ReloadOnSave"/>
        <fileIconPatcher implementation="rw.icons.IconPatcher" order="last"/>
        <projectViewNodeDecorator implementation="rw.icons.IconDecorator"/>
    </extensions>

    <actions>
        <action id="DebugWithReloadium"
                class="rw.action.DebugWithReloadium"
                text="Debug with Reloadium"
                description="Debug script with hot reloading enabled"
                icon="rw.icons.Icons.Debug"
        >
            <add-to-group group-id="ToolbarRunGroup" anchor="first"/>
            <add-to-group group-id="RunMenu" anchor="first"/>
            <add-to-group group-id="RunDashboardContentToolbar" anchor="first"/>
        </action>

        <action id="RunWithReloadium"
                class="rw.action.RunWithReloadium"
                text="Run with Reloadium"
                description="Run script with hot reloading enabled"
                icon="rw.icons.Icons.Run">
            <add-to-group group-id="ToolbarRunGroup" anchor="first"/>
            <add-to-group group-id="RunMenu" anchor="first"/>
            <add-to-group group-id="RunDashboardContentToolbar" anchor="first"/>
        </action>

        <action id="DebugWithReloadiumRunContextPopup"
                class="rw.action.DebugWithReloadiumRunContext"
                text="Debug with Reloadium"
                description="Debug script with hot reloading enabled"
                icon="rw.icons.Icons.Debug">
            <add-to-group group-id="RunContextGroup" anchor="first"/>
        </action>

        <action id="RunWithReloadiumRunContextPopup"
                class="rw.action.RunWithReloadiumRunContext"
                text="Run with Reloadium"
                description="Run script with hot reloading enabled"
                icon="rw.icons.Icons.Run">
            <add-to-group group-id="RunContextGroup" anchor="first"/>
        </action>

        <action id="ManualReload"
                class="rw.action.ManualReload"
                text="Reload File"
                description="Reload File"
                icon="rw.icons.Icons.Update">
            <add-to-group group-id="RunContextGroup" anchor="last"/>
        </action>

        <action id="RerunDebugWithReloadium" class="rw.action.RerunDebugWithReloadium">
            <add-to-group group-id="XDebugger.ToolWindow.LeftToolbar" anchor="first"/>
        </action>

        <group id="ReloadiumGroup" text="Reloadium" popup="true">
            <action id="UpdatePackage"
                    class="rw.action.Update"
                    text="Update Reloadium Package"
                    icon="rw.icons.Icons.Update">
            </action>
            <action id="ReloadiumProjectSettings"
                    class="rw.action.ProjectSettings"
                    text="Project Settings"
                    icon="rw.icons.Icons.Settings">
            </action>
            <action id="ReloadiumPreferences"
                    class="rw.action.Preferences"
                    text="Preferences"
                    icon="rw.icons.Icons.Settings">
            </action>
            <action id="ReloadiumAbout"
                    class="rw.action.About"
                    text="About"
                    icon="rw.icons.Icons.About">
            </action>
            <add-to-group group-id="MainMenu" relative-to-action="ToolsMenu" anchor="before"/>
        </group>

        <action id="Profile" class="rw.profile.ProfileResultToggle" icon="rw.icons.Icons.Timing">
          <add-to-group group-id="EditorGutterVcsPopupMenu" relative-to-action="Annotate" anchor="after"/>
        </action>
    </actions>

</idea-plugin>